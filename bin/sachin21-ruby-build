#!/usr/bin/env bash
set -e
set -x

# check os
echo -n "If you using mac then enter m/M"
  read flag

# setup tools
if [ $flag = 'm' -o $flag = 'M' ]; then

  export RUBY_CONFIGURE_OPTS=" \
    --enable-shared \
    --with-readline-dir=$(brew --prefix readline)
    --with-openssl-dir=$(brew --prefix openssl)
    "
fi

export MAKE_OPTS="-j4"

for TARGET_VERSION in $@; do
  rbenv install $TARGET_VERSION
  rbenv global $TARGET_VERSION

  export RBENV_VERSION=$TARGET_VERSION

  gem install bundler
  gem install awesome_print
  gem install space2underscore
  gem install space2dot

  gem install rails -v '4.0.1'
  gem install rails -v '4.1.1'
  gem install rails -v '4.1.4'

  rbenv rehash
done
